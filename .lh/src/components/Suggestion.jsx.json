{
    "sourceFile": "src/components/Suggestion.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 21,
            "patches": [
                {
                    "date": 1739465480898,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1739465543941,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,32 +1,77 @@\n-import React from \"react\";\r\n+import React, { useState } from \"react\";\r\n \r\n const Suggestion = () => {\r\n+  const [suggestionData, setSuggestionData] = useState({\r\n+    name: \"\",\r\n+    email: \"\",\r\n+    suggestion: \"\",\r\n+  });\r\n+\r\n+  const handleChange = (e) => {\r\n+    setSuggestionData({\r\n+      ...suggestionData,\r\n+      [e.target.name]: e.target.value,\r\n+    });\r\n+  };\r\n+\r\n+  const handleSubmit = (e) => {\r\n+    e.preventDefault();\r\n+\r\n+    // Add your submission logic here (e.g., make an API call to submit the suggestion)\r\n+    console.log(suggestionData);\r\n+\r\n+    // Reset the form after submission\r\n+    setSuggestionData({\r\n+      name: \"\",\r\n+      email: \"\",\r\n+      suggestion: \"\",\r\n+    });\r\n+  };\r\n+\r\n   return (\r\n     <div>\r\n-      <form>\r\n+      <form onSubmit={handleSubmit}>\r\n         <div className=\"mb-3\">\r\n-          <label htmlFor=\"exampleInputPassword1\" className=\"form-label\">\r\n+          <label htmlFor=\"name\" className=\"form-label\">\r\n             Name\r\n           </label>\r\n           <input\r\n-            type=\"password\"\r\n+            type=\"text\"\r\n             className=\"form-control\"\r\n             id=\"name\"\r\n-            class=\"name\"\r\n+            name=\"name\"\r\n+            value={suggestionData.name}\r\n+            onChange={handleChange}\r\n+            required\r\n           />\r\n         </div>\r\n         <div className=\"mb-3\">\r\n-          <label htmlFor=\"exampleInputEmail1\" className=\"form-label\">\r\n+          <label htmlFor=\"email\" className=\"form-label\">\r\n             Email address\r\n           </label>\r\n-          <input type=\"email\" className=\"form-control\" id=\"email\" />\r\n+          <input\r\n+            type=\"email\"\r\n+            className=\"form-control\"\r\n+            id=\"email\"\r\n+            name=\"email\"\r\n+            value={suggestionData.email}\r\n+            onChange={handleChange}\r\n+            required\r\n+          />\r\n         </div>\r\n         <div className=\"mb-3\">\r\n-          <label htmlFor=\"exampleInputPassword1\" className=\"form-label\">\r\n+          <label htmlFor=\"suggestion\" className=\"form-label\">\r\n             Suggestion\r\n           </label>\r\n-          <input type=\"password\" className=\"form-control\" id=\"suggestion\" />\r\n+          <textarea\r\n+            className=\"form-control\"\r\n+            id=\"suggestion\"\r\n+            name=\"suggestion\"\r\n+            value={suggestionData.suggestion}\r\n+            onChange={handleChange}\r\n+            required\r\n+          ></textarea>\r\n         </div>\r\n         <button type=\"submit\" className=\"btn btn-primary\">\r\n           Submit\r\n         </button>\r\n"
                },
                {
                    "date": 1739467115690,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,32 +5,66 @@\n     name: \"\",\r\n     email: \"\",\r\n     suggestion: \"\",\r\n   });\r\n+  const [alert, setAlert] = useState(\"\"); // State to show alerts (success or error)\r\n \r\n+  // Handle changes in the form fields\r\n   const handleChange = (e) => {\r\n     setSuggestionData({\r\n       ...suggestionData,\r\n       [e.target.name]: e.target.value,\r\n     });\r\n   };\r\n \r\n-  const handleSubmit = (e) => {\r\n+  // Handle form submission\r\n+  const handleSubmit = async (e) => {\r\n     e.preventDefault();\r\n \r\n-    // Add your submission logic here (e.g., make an API call to submit the suggestion)\r\n-    console.log(suggestionData);\r\n+    // Check if all required fields are filled\r\n+    if (\r\n+      !suggestionData.name ||\r\n+      !suggestionData.email ||\r\n+      !suggestionData.suggestion\r\n+    ) {\r\n+      setAlert(\"All fields are required.\");\r\n+      return;\r\n+    }\r\n \r\n-    // Reset the form after submission\r\n-    setSuggestionData({\r\n-      name: \"\",\r\n-      email: \"\",\r\n-      suggestion: \"\",\r\n+    // Prepare data to send to the backend\r\n+    const response = await fetch(\"http://localhost:5000/api/sugg/addsugg\", {\r\n+      method: \"POST\",\r\n+      headers: {\r\n+        \"Content-Type\": \"application/json\",\r\n+        \"auth-token\": localStorage.getItem(\"token\"), // Ensure token is sent for authentication\r\n+      },\r\n+      body: JSON.stringify({\r\n+        suggestion: suggestionData.suggestion,\r\n+        email: suggestionData.email,\r\n+      }),\r\n     });\r\n+\r\n+    const json = await response.json();\r\n+\r\n+    if (json.success) {\r\n+      setAlert(\"Suggestion submitted successfully!\");\r\n+      // Reset form fields\r\n+      setSuggestionData({\r\n+        name: \"\",\r\n+        email: \"\",\r\n+        suggestion: \"\",\r\n+      });\r\n+    } else {\r\n+      setAlert(\"Failed to submit suggestion.\");\r\n+    }\r\n   };\r\n \r\n   return (\r\n-    <div>\r\n+    <div className=\"container my-3\">\r\n+      {/* Show success/error alerts */}\r\n+      {alert && <div className=\"alert alert-info\">{alert}</div>}\r\n+\r\n+      <h3>Submit Your Suggestion</h3>\r\n       <form onSubmit={handleSubmit}>\r\n         <div className=\"mb-3\">\r\n           <label htmlFor=\"name\" className=\"form-label\">\r\n             Name\r\n"
                },
                {
                    "date": 1739469157329,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,49 +15,56 @@\n       [e.target.name]: e.target.value,\r\n     });\r\n   };\r\n \r\n-  // Handle form submission\r\n-  const handleSubmit = async (e) => {\r\n-    e.preventDefault();\r\n+  // Handle form submissionconst handleSubmit = async (e) => {\r\n+  e.preventDefault();\r\n \r\n-    // Check if all required fields are filled\r\n-    if (\r\n-      !suggestionData.name ||\r\n-      !suggestionData.email ||\r\n-      !suggestionData.suggestion\r\n-    ) {\r\n-      setAlert(\"All fields are required.\");\r\n-      return;\r\n-    }\r\n+  // Check if all required fields are filled\r\n+  if (\r\n+    !suggestionData.name ||\r\n+    !suggestionData.email ||\r\n+    !suggestionData.suggestion\r\n+  ) {\r\n+    setAlert(\"All fields are required.\");\r\n+    return;\r\n+  }\r\n \r\n-    // Prepare data to send to the backend\r\n-    const response = await fetch(\"http://localhost:5000/api/sugg/addsugg\", {\r\n-      method: \"POST\",\r\n-      headers: {\r\n-        \"Content-Type\": \"application/json\",\r\n-        \"auth-token\": localStorage.getItem(\"token\"), // Ensure token is sent for authentication\r\n-      },\r\n-      body: JSON.stringify({\r\n-        suggestion: suggestionData.suggestion,\r\n-        email: suggestionData.email,\r\n-      }),\r\n+  // Prepare data to send to the backend\r\n+  const response = await fetch(\"http://localhost:5000/api/sugg/addsugg\", {\r\n+    method: \"POST\",\r\n+    headers: {\r\n+      \"Content-Type\": \"application/json\",\r\n+      \"auth-token\": localStorage.getItem(\"token\"), // Ensure token is sent for authentication\r\n+    },\r\n+    body: JSON.stringify({\r\n+      suggestion: suggestionData.suggestion,\r\n+      email: suggestionData.email,\r\n+    }),\r\n+  });\r\n+\r\n+  const json = await response.json();\r\n+\r\n+  if (json.success) {\r\n+    // Set success alert\r\n+    setAlert(\"Suggestion submitted successfully!\");\r\n+\r\n+    // Reset form fields and trigger alert update\r\n+    setSuggestionData({\r\n+      name: \"\",\r\n+      email: \"\",\r\n+      suggestion: \"\",\r\n     });\r\n \r\n-    const json = await response.json();\r\n+    // You can also add a timeout to automatically clear the alert after a few seconds:\r\n+    setTimeout(() => {\r\n+      setAlert(\"\");\r\n+    }, 3000); // Clears alert after 3 seconds\r\n+  } else {\r\n+    setAlert(\"Failed to submit suggestion.\");\r\n+  }\r\n+};\r\n \r\n-    if (json.success) {\r\n-      setAlert(\"Suggestion submitted successfully!\");\r\n-      // Reset form fields\r\n-      setSuggestionData({\r\n-        name: \"\",\r\n-        email: \"\",\r\n-        suggestion: \"\",\r\n-      });\r\n-    } else {\r\n-      setAlert(\"Failed to submit suggestion.\");\r\n-    }\r\n-  };\r\n \r\n   return (\r\n     <div className=\"container my-3\">\r\n       {/* Show success/error alerts */}\r\n"
                },
                {
                    "date": 1739469177123,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,57 +15,57 @@\n       [e.target.name]: e.target.value,\r\n     });\r\n   };\r\n \r\n-  // Handle form submissionconst handleSubmit = async (e) => {\r\n-  e.preventDefault();\r\n+  // Handle form submission\r\n+  const handleSubmit = async (e) => {\r\n+    e.preventDefault();\r\n \r\n-  // Check if all required fields are filled\r\n-  if (\r\n-    !suggestionData.name ||\r\n-    !suggestionData.email ||\r\n-    !suggestionData.suggestion\r\n-  ) {\r\n-    setAlert(\"All fields are required.\");\r\n-    return;\r\n-  }\r\n+    // Check if all required fields are filled\r\n+    if (\r\n+      !suggestionData.name ||\r\n+      !suggestionData.email ||\r\n+      !suggestionData.suggestion\r\n+    ) {\r\n+      setAlert(\"All fields are required.\");\r\n+      return;\r\n+    }\r\n \r\n-  // Prepare data to send to the backend\r\n-  const response = await fetch(\"http://localhost:5000/api/sugg/addsugg\", {\r\n-    method: \"POST\",\r\n-    headers: {\r\n-      \"Content-Type\": \"application/json\",\r\n-      \"auth-token\": localStorage.getItem(\"token\"), // Ensure token is sent for authentication\r\n-    },\r\n-    body: JSON.stringify({\r\n-      suggestion: suggestionData.suggestion,\r\n-      email: suggestionData.email,\r\n-    }),\r\n-  });\r\n+    // Prepare data to send to the backend\r\n+    const response = await fetch(\"http://localhost:5000/api/sugg/addsugg\", {\r\n+      method: \"POST\",\r\n+      headers: {\r\n+        \"Content-Type\": \"application/json\",\r\n+        \"auth-token\": localStorage.getItem(\"token\"), // Ensure token is sent for authentication\r\n+      },\r\n+      body: JSON.stringify({\r\n+        suggestion: suggestionData.suggestion,\r\n+        email: suggestionData.email,\r\n+      }),\r\n+    });\r\n \r\n-  const json = await response.json();\r\n+    const json = await response.json();\r\n \r\n-  if (json.success) {\r\n-    // Set success alert\r\n-    setAlert(\"Suggestion submitted successfully!\");\r\n+    if (json.success) {\r\n+      // Set success alert\r\n+      setAlert(\"Suggestion submitted successfully!\");\r\n \r\n-    // Reset form fields and trigger alert update\r\n-    setSuggestionData({\r\n-      name: \"\",\r\n-      email: \"\",\r\n-      suggestion: \"\",\r\n-    });\r\n+      // Reset form fields and trigger alert update\r\n+      setSuggestionData({\r\n+        name: \"\",\r\n+        email: \"\",\r\n+        suggestion: \"\",\r\n+      });\r\n \r\n-    // You can also add a timeout to automatically clear the alert after a few seconds:\r\n-    setTimeout(() => {\r\n-      setAlert(\"\");\r\n-    }, 3000); // Clears alert after 3 seconds\r\n-  } else {\r\n-    setAlert(\"Failed to submit suggestion.\");\r\n-  }\r\n-};\r\n+      // You can also add a timeout to automatically clear the alert after a few seconds:\r\n+      setTimeout(() => {\r\n+        setAlert(\"\");\r\n+      }, 3000); // Clears alert after 3 seconds\r\n+    } else {\r\n+      setAlert(\"Failed to submit suggestion.\");\r\n+    }\r\n+  };\r\n \r\n-\r\n   return (\r\n     <div className=\"container my-3\">\r\n       {/* Show success/error alerts */}\r\n       {alert && <div className=\"alert alert-info\">{alert}</div>}\r\n"
                },
                {
                    "date": 1739516364067,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,7 @@\n import React, { useState } from \"react\";\r\n \r\n-const Suggestion = () => {\r\n+const Suggestion = ({ onSubmitSuccess }) => {\r\n   const [suggestionData, setSuggestionData] = useState({\r\n     name: \"\",\r\n     email: \"\",\r\n     suggestion: \"\",\r\n@@ -16,8 +16,10 @@\n     });\r\n   };\r\n \r\n   // Handle form submission\r\n+  console.log(json);\r\n+\r\n   const handleSubmit = async (e) => {\r\n     e.preventDefault();\r\n \r\n     // Check if all required fields are filled\r\n@@ -55,21 +57,25 @@\n         email: \"\",\r\n         suggestion: \"\",\r\n       });\r\n \r\n+      // Call the onSubmitSuccess function to refresh the top suggestions\r\n+\r\n+      onSubmitSuccess();\r\n+\r\n       // You can also add a timeout to automatically clear the alert after a few seconds:\r\n       setTimeout(() => {\r\n         setAlert(\"\");\r\n       }, 3000); // Clears alert after 3 seconds\r\n     } else {\r\n-      setAlert(\"Failed to submit suggestion.\");\r\n+      setAlert(\"Error submitting suggestion.\");\r\n     }\r\n   };\r\n \r\n   return (\r\n     <div className=\"container my-3\">\r\n       {/* Show success/error alerts */}\r\n-      {alert && <div className=\"alert alert-info\">{alert}</div>}\r\n+      {alert && <div className=\"alert alert-success\">{alert}</div>}\r\n \r\n       <h3>Submit Your Suggestion</h3>\r\n       <form onSubmit={handleSubmit}>\r\n         <div className=\"mb-3\">\r\n"
                },
                {
                    "date": 1739516432080,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,9 +16,8 @@\n     });\r\n   };\r\n \r\n   // Handle form submission\r\n-  console.log(json);\r\n \r\n   const handleSubmit = async (e) => {\r\n     e.preventDefault();\r\n \r\n@@ -45,9 +44,9 @@\n       }),\r\n     });\r\n \r\n     const json = await response.json();\r\n-\r\n+    console.log(json);\r\n     if (json.success) {\r\n       // Set success alert\r\n       setAlert(\"Suggestion submitted successfully!\");\r\n \r\n"
                },
                {
                    "date": 1739516637532,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -65,9 +65,9 @@\n       setTimeout(() => {\r\n         setAlert(\"\");\r\n       }, 3000); // Clears alert after 3 seconds\r\n     } else {\r\n-      setAlert(\"Error submitting suggestion.\");\r\n+      setAlert(\"Please Login First then submit suggestion.\");\r\n     }\r\n   };\r\n \r\n   return (\r\n"
                },
                {
                    "date": 1739516982514,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,9 +44,9 @@\n       }),\r\n     });\r\n \r\n     const json = await response.json();\r\n-    console.log(json);\r\n+\r\n     if (json.success) {\r\n       // Set success alert\r\n       setAlert(\"Suggestion submitted successfully!\");\r\n \r\n@@ -65,9 +65,9 @@\n       setTimeout(() => {\r\n         setAlert(\"\");\r\n       }, 3000); // Clears alert after 3 seconds\r\n     } else {\r\n-      setAlert(\"Please Login First then submit suggestion.\");\r\n+      setAlert(\"Error submitting suggestion.\");\r\n     }\r\n   };\r\n \r\n   return (\r\n"
                },
                {
                    "date": 1739517428542,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,76 +5,76 @@\n     name: \"\",\r\n     email: \"\",\r\n     suggestion: \"\",\r\n   });\r\n-  const [alert, setAlert] = useState(\"\"); // State to show alerts (success or error)\r\n+  const [alert, setAlert] = useState({ message: \"\", type: \"\" }); // Alert state with type\r\n \r\n-  // Handle changes in the form fields\r\n   const handleChange = (e) => {\r\n     setSuggestionData({\r\n       ...suggestionData,\r\n       [e.target.name]: e.target.value,\r\n     });\r\n   };\r\n \r\n-  // Handle form submission\r\n-\r\n   const handleSubmit = async (e) => {\r\n     e.preventDefault();\r\n \r\n-    // Check if all required fields are filled\r\n     if (\r\n       !suggestionData.name ||\r\n       !suggestionData.email ||\r\n       !suggestionData.suggestion\r\n     ) {\r\n-      setAlert(\"All fields are required.\");\r\n+      setAlert({ message: \"All fields are required.\", type: \"danger\" });\r\n       return;\r\n     }\r\n \r\n-    // Prepare data to send to the backend\r\n-    const response = await fetch(\"http://localhost:5000/api/sugg/addsugg\", {\r\n-      method: \"POST\",\r\n-      headers: {\r\n-        \"Content-Type\": \"application/json\",\r\n-        \"auth-token\": localStorage.getItem(\"token\"), // Ensure token is sent for authentication\r\n-      },\r\n-      body: JSON.stringify({\r\n-        suggestion: suggestionData.suggestion,\r\n-        email: suggestionData.email,\r\n-      }),\r\n-    });\r\n+    try {\r\n+      const response = await fetch(\"http://localhost:5000/api/sugg/addsugg\", {\r\n+        method: \"POST\",\r\n+        headers: {\r\n+          \"Content-Type\": \"application/json\",\r\n+          \"auth-token\": localStorage.getItem(\"token\"),\r\n+        },\r\n+        body: JSON.stringify({\r\n+          name: suggestionData.name, // Include name in request\r\n+          email: suggestionData.email,\r\n+          suggestion: suggestionData.suggestion,\r\n+        }),\r\n+      });\r\n \r\n-    const json = await response.json();\r\n+      const json = await response.json();\r\n \r\n-    if (json.success) {\r\n-      // Set success alert\r\n-      setAlert(\"Suggestion submitted successfully!\");\r\n+      if (json.success) {\r\n+        setAlert({\r\n+          message: \"Suggestion submitted successfully!\",\r\n+          type: \"success\",\r\n+        });\r\n+        setSuggestionData({ name: \"\", email: \"\", suggestion: \"\" });\r\n \r\n-      // Reset form fields and trigger alert update\r\n-      setSuggestionData({\r\n-        name: \"\",\r\n-        email: \"\",\r\n-        suggestion: \"\",\r\n+        onSubmitSuccess(); // Refresh suggestions\r\n+\r\n+        setTimeout(() => setAlert({ message: \"\", type: \"\" }), 3000);\r\n+      } else {\r\n+        setAlert({\r\n+          message: json.error || \"Error submitting suggestion.\",\r\n+          type: \"danger\",\r\n+        });\r\n+      }\r\n+    } catch (error) {\r\n+      setAlert({\r\n+        message: \"Server error, please try again later.\",\r\n+        type: \"danger\",\r\n       });\r\n-\r\n-      // Call the onSubmitSuccess function to refresh the top suggestions\r\n-\r\n-      onSubmitSuccess();\r\n-\r\n-      // You can also add a timeout to automatically clear the alert after a few seconds:\r\n-      setTimeout(() => {\r\n-        setAlert(\"\");\r\n-      }, 3000); // Clears alert after 3 seconds\r\n-    } else {\r\n-      setAlert(\"Error submitting suggestion.\");\r\n     }\r\n   };\r\n \r\n   return (\r\n     <div className=\"container my-3\">\r\n-      {/* Show success/error alerts */}\r\n-      {alert && <div className=\"alert alert-success\">{alert}</div>}\r\n+      {alert.message && (\r\n+        <div className={`alert alert-${alert.type}`} role=\"alert\">\r\n+          {alert.message}\r\n+        </div>\r\n+      )}\r\n \r\n       <h3>Submit Your Suggestion</h3>\r\n       <form onSubmit={handleSubmit}>\r\n         <div className=\"mb-3\">\r\n"
                },
                {
                    "date": 1739518085092,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,9 +13,8 @@\n       ...suggestionData,\r\n       [e.target.name]: e.target.value,\r\n     });\r\n   };\r\n-\r\n   const handleSubmit = async (e) => {\r\n     e.preventDefault();\r\n \r\n     if (\r\n@@ -34,9 +33,9 @@\n           \"Content-Type\": \"application/json\",\r\n           \"auth-token\": localStorage.getItem(\"token\"),\r\n         },\r\n         body: JSON.stringify({\r\n-          name: suggestionData.name, // Include name in request\r\n+          name: suggestionData.name, // Include name\r\n           email: suggestionData.email,\r\n           suggestion: suggestionData.suggestion,\r\n         }),\r\n       });\r\n"
                },
                {
                    "date": 1739518190387,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,10 +53,10 @@\n \r\n         setTimeout(() => setAlert({ message: \"\", type: \"\" }), 3000);\r\n       } else {\r\n         setAlert({\r\n-          message: json.error || \"Error submitting suggestion.\",\r\n-          type: \"danger\",\r\n+          message: \"Submitted\",\r\n+          type: \"success\",\r\n         });\r\n       }\r\n     } catch (error) {\r\n       setAlert({\r\n"
                },
                {
                    "date": 1739518792573,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -73,9 +73,11 @@\n           {alert.message}\r\n         </div>\r\n       )}\r\n \r\n-      <h3>Submit Your Suggestion</h3>\r\n+      <h3>\r\n+        Submit Your Suggestion<i className=\"fa-solid fa-circle-plus\"></i>\r\n+      </h3>\r\n       <form onSubmit={handleSubmit}>\r\n         <div className=\"mb-3\">\r\n           <label htmlFor=\"name\" className=\"form-label\">\r\n             Name\r\n"
                },
                {
                    "date": 1739518807512,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -74,9 +74,9 @@\n         </div>\r\n       )}\r\n \r\n       <h3>\r\n-        Submit Your Suggestion<i className=\"fa-solid fa-circle-plus\"></i>\r\n+        Submit Your Suggestions <i className=\"fa-solid fa-circle-plus\"></i>\r\n       </h3>\r\n       <form onSubmit={handleSubmit}>\r\n         <div className=\"mb-3\">\r\n           <label htmlFor=\"name\" className=\"form-label\">\r\n"
                },
                {
                    "date": 1739520644618,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,20 +1,31 @@\n-import React, { useState } from \"react\";\r\n+import React, { useState, useEffect } from \"react\";\r\n+import { useNavigate } from \"react-router-dom\"; // Use the useNavigate hook\r\n \r\n const Suggestion = ({ onSubmitSuccess }) => {\r\n+  const navigate = useNavigate();\r\n   const [suggestionData, setSuggestionData] = useState({\r\n     name: \"\",\r\n     email: \"\",\r\n     suggestion: \"\",\r\n   });\r\n-  const [alert, setAlert] = useState({ message: \"\", type: \"\" }); // Alert state with type\r\n+  const [alert, setAlert] = useState({ message: \"\", type: \"\" });\r\n \r\n+  // Check if the user is logged in (token exists in localStorage)\r\n+  useEffect(() => {\r\n+    if (!localStorage.getItem(\"token\")) {\r\n+      // If token is not present, redirect to login page\r\n+      navigate(\"/login\");\r\n+    }\r\n+  }, [navigate]); // Run effect only on component mount\r\n+\r\n   const handleChange = (e) => {\r\n     setSuggestionData({\r\n       ...suggestionData,\r\n       [e.target.name]: e.target.value,\r\n     });\r\n   };\r\n+\r\n   const handleSubmit = async (e) => {\r\n     e.preventDefault();\r\n \r\n     if (\r\n@@ -33,9 +44,9 @@\n           \"Content-Type\": \"application/json\",\r\n           \"auth-token\": localStorage.getItem(\"token\"),\r\n         },\r\n         body: JSON.stringify({\r\n-          name: suggestionData.name, // Include name\r\n+          name: suggestionData.name,\r\n           email: suggestionData.email,\r\n           suggestion: suggestionData.suggestion,\r\n         }),\r\n       });\r\n@@ -47,16 +58,14 @@\n           message: \"Suggestion submitted successfully!\",\r\n           type: \"success\",\r\n         });\r\n         setSuggestionData({ name: \"\", email: \"\", suggestion: \"\" });\r\n-\r\n-        onSubmitSuccess(); // Refresh suggestions\r\n-\r\n+        onSubmitSuccess();\r\n         setTimeout(() => setAlert({ message: \"\", type: \"\" }), 3000);\r\n       } else {\r\n         setAlert({\r\n-          message: \"Submitted\",\r\n-          type: \"success\",\r\n+          message: \"Failed to submit suggestion. Try again.\",\r\n+          type: \"danger\",\r\n         });\r\n       }\r\n     } catch (error) {\r\n       setAlert({\r\n@@ -73,11 +82,9 @@\n           {alert.message}\r\n         </div>\r\n       )}\r\n \r\n-      <h3>\r\n-        Submit Your Suggestions <i className=\"fa-solid fa-circle-plus\"></i>\r\n-      </h3>\r\n+      <h3>Submit Your Suggestions</h3>\r\n       <form onSubmit={handleSubmit}>\r\n         <div className=\"mb-3\">\r\n           <label htmlFor=\"name\" className=\"form-label\">\r\n             Name\r\n"
                },
                {
                    "date": 1739520808186,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,6 @@\n import React, { useState, useEffect } from \"react\";\r\n-import { useNavigate } from \"react-router-dom\"; // Use the useNavigate hook\r\n+import { useNavigate } from \"react-router-dom\";\r\n \r\n const Suggestion = ({ onSubmitSuccess }) => {\r\n   const navigate = useNavigate();\r\n   const [suggestionData, setSuggestionData] = useState({\r\n@@ -51,9 +51,11 @@\n         }),\r\n       });\r\n \r\n       const json = await response.json();\r\n+      console.log(json); // Log the response to check the structure\r\n \r\n+      // Check for success response from the server\r\n       if (json.success) {\r\n         setAlert({\r\n           message: \"Suggestion submitted successfully!\",\r\n           type: \"success\",\r\n@@ -61,14 +63,16 @@\n         setSuggestionData({ name: \"\", email: \"\", suggestion: \"\" });\r\n         onSubmitSuccess();\r\n         setTimeout(() => setAlert({ message: \"\", type: \"\" }), 3000);\r\n       } else {\r\n+        // Handle error if the success field is false or not found\r\n         setAlert({\r\n-          message: \"Failed to submit suggestion. Try again.\",\r\n+          message: json.message || \"Failed to submit suggestion. Try again.\",\r\n           type: \"danger\",\r\n         });\r\n       }\r\n     } catch (error) {\r\n+      // Handle any errors during the fetch request\r\n       setAlert({\r\n         message: \"Server error, please try again later.\",\r\n         type: \"danger\",\r\n       });\r\n"
                },
                {
                    "date": 1739520904338,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -64,12 +64,16 @@\n         onSubmitSuccess();\r\n         setTimeout(() => setAlert({ message: \"\", type: \"\" }), 3000);\r\n       } else {\r\n         // Handle error if the success field is false or not found\r\n-        setAlert({\r\n-          message: json.message || \"Failed to submit suggestion. Try again.\",\r\n-          type: \"danger\",\r\n-        });\r\n+        setAlert(\r\n+          {\r\n+            message:\r\n+              \"If already a logged in user then suggestion submitted ...\",\r\n+            type: \"danger\",\r\n+          },\r\n+          1000\r\n+        );\r\n       }\r\n     } catch (error) {\r\n       // Handle any errors during the fetch request\r\n       setAlert({\r\n"
                },
                {
                    "date": 1739520978133,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -66,11 +66,10 @@\n       } else {\r\n         // Handle error if the success field is false or not found\r\n         setAlert(\r\n           {\r\n-            message:\r\n-              \"If already a logged in user then suggestion submitted ...\",\r\n-            type: \"danger\",\r\n+            message: \" suggestion submitted ...\",\r\n+            type: \"success\",\r\n           },\r\n           1000\r\n         );\r\n       }\r\n"
                },
                {
                    "date": 1739521388532,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -89,9 +89,11 @@\n           {alert.message}\r\n         </div>\r\n       )}\r\n \r\n-      <h3>Submit Your Suggestions</h3>\r\n+      <h3>\r\n+        Submit Your Suggestions <i className=\"fa-solid fa-cloud\"></i>{\" \"}\r\n+      </h3>\r\n       <form onSubmit={handleSubmit}>\r\n         <div className=\"mb-3\">\r\n           <label htmlFor=\"name\" className=\"form-label\">\r\n             Name\r\n"
                },
                {
                    "date": 1739521472244,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -90,9 +90,9 @@\n         </div>\r\n       )}\r\n \r\n       <h3>\r\n-        Submit Your Suggestions <i className=\"fa-solid fa-cloud\"></i>{\" \"}\r\n+        Submit Your Suggestions <i className=\"fa-solid fa-folder-open\"></i>{\" \"}\r\n       </h3>\r\n       <form onSubmit={handleSubmit}>\r\n         <div className=\"mb-3\">\r\n           <label htmlFor=\"name\" className=\"form-label\">\r\n"
                },
                {
                    "date": 1739521687438,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -66,9 +66,10 @@\n       } else {\r\n         // Handle error if the success field is false or not found\r\n         setAlert(\r\n           {\r\n-            message: \" suggestion submitted ...\",\r\n+            message:\r\n+              \"Your suggestion has been received! We value your contribution....\",\r\n             type: \"success\",\r\n           },\r\n           1000\r\n         );\r\n"
                },
                {
                    "date": 1739521795249,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,9 +13,9 @@\n   // Check if the user is logged in (token exists in localStorage)\r\n   useEffect(() => {\r\n     if (!localStorage.getItem(\"token\")) {\r\n       // If token is not present, redirect to login page\r\n-      navigate(\"/login\");\r\n+      navigate(\"/login\", { replace: true });\r\n     }\r\n   }, [navigate]); // Run effect only on component mount\r\n \r\n   const handleChange = (e) => {\r\n@@ -51,34 +51,30 @@\n         }),\r\n       });\r\n \r\n       const json = await response.json();\r\n-      console.log(json); // Log the response to check the structure\r\n \r\n-      // Check for success response from the server\r\n       if (json.success) {\r\n         setAlert({\r\n-          message: \"Suggestion submitted successfully!\",\r\n+          message:\r\n+            \"Your suggestion has been successfully submitted. Thank you for your input!\",\r\n           type: \"success\",\r\n         });\r\n         setSuggestionData({ name: \"\", email: \"\", suggestion: \"\" });\r\n         onSubmitSuccess();\r\n         setTimeout(() => setAlert({ message: \"\", type: \"\" }), 3000);\r\n       } else {\r\n-        // Handle error if the success field is false or not found\r\n-        setAlert(\r\n-          {\r\n-            message:\r\n-              \"Your suggestion has been received! We value your contribution....\",\r\n-            type: \"success\",\r\n-          },\r\n-          1000\r\n-        );\r\n+        setAlert({\r\n+          message:\r\n+            json.message ||\r\n+            \"Failed to submit suggestion. Please try again later.\",\r\n+          type: \"danger\",\r\n+        });\r\n       }\r\n     } catch (error) {\r\n-      // Handle any errors during the fetch request\r\n       setAlert({\r\n-        message: \"Server error, please try again later.\",\r\n+        message:\r\n+          \"Sorry, we couldn't process your suggestion at this time. Please try again later.\",\r\n         type: \"danger\",\r\n       });\r\n     }\r\n   };\r\n@@ -90,11 +86,9 @@\n           {alert.message}\r\n         </div>\r\n       )}\r\n \r\n-      <h3>\r\n-        Submit Your Suggestions <i className=\"fa-solid fa-folder-open\"></i>{\" \"}\r\n-      </h3>\r\n+      <h3>Submit Your Suggestions</h3>\r\n       <form onSubmit={handleSubmit}>\r\n         <div className=\"mb-3\">\r\n           <label htmlFor=\"name\" className=\"form-label\">\r\n             Name\r\n"
                }
            ],
            "date": 1739465480898,
            "name": "Commit-0",
            "content": "import React from \"react\";\r\n\r\nconst Suggestion = () => {\r\n  return (\r\n    <div>\r\n      <form>\r\n        <div className=\"mb-3\">\r\n          <label htmlFor=\"exampleInputPassword1\" className=\"form-label\">\r\n            Name\r\n          </label>\r\n          <input\r\n            type=\"password\"\r\n            className=\"form-control\"\r\n            id=\"name\"\r\n            class=\"name\"\r\n          />\r\n        </div>\r\n        <div className=\"mb-3\">\r\n          <label htmlFor=\"exampleInputEmail1\" className=\"form-label\">\r\n            Email address\r\n          </label>\r\n          <input type=\"email\" className=\"form-control\" id=\"email\" />\r\n        </div>\r\n        <div className=\"mb-3\">\r\n          <label htmlFor=\"exampleInputPassword1\" className=\"form-label\">\r\n            Suggestion\r\n          </label>\r\n          <input type=\"password\" className=\"form-control\" id=\"suggestion\" />\r\n        </div>\r\n        <button type=\"submit\" className=\"btn btn-primary\">\r\n          Submit\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Suggestion;\r\n"
        }
    ]
}